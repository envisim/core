import {distTests, fromTo} from './distributions.testf';
import {
  Uniform as Dist,
  UniformDiscrete as Dist2,
  Triangular as Dist3,
} from '../src/uniform';

describe('uniform(-1, 1)', () => {
  const pdf = new Array(21).fill(0.5);
  const cdf = [
    0.0, 0.049999999999999988898, 0.099999999999999977796,
    0.150000000000000022204, 0.200000000000000011102, 0.25,
    0.299999999999999988898, 0.349999999999999977796, 0.400000000000000022204,
    0.450000000000000011102, 0.5, 0.550000000000000044409,
    0.599999999999999977796, 0.650000000000000022204, 0.699999999999999955591,
    0.75, 0.800000000000000044409, 0.849999999999999977796,
    0.900000000000000022204, 0.949999999999999955591, 1.0,
  ];
  const quantile = [
    -1.0, -0.80000000000000004441, -0.5999999999999999778,
    -0.4000000000000000222, -0.19999999999999995559, 0.0,
    0.19999999999999995559, 0.39999999999999991118, 0.60000000000000008882,
    0.80000000000000004441, 1.0,
  ];
  const x = fromTo(-1, 1.01, 0.1);
  const params = {a: -1.0, b: 1.0};

  distTests({Dist, x, params, pdf, cdf, quantile});
});

describe('uniform discrete (-10, 10)', () => {
  const pdf = new Array(11).fill(0.047619047619047616404);
  const cdf = [
    0.047619047619047616404, 0.142857142857142849213, 0.238095238095238082021,
    0.33333333333333331483, 0.428571428571428547638, 0.523809523809523835958,
    0.619047619047619068766, 0.714285714285714301575, 0.809523809523809534383,
    0.904761904761904767192, 1.0,
  ];
  const quantile = [-10, -8, -6, -4, -2, 0, 2, 4, 6, 8, 10];
  const x = fromTo(-10, 10, 2);
  const params = {a: -10, b: 10};

  distTests({Dist: Dist2, x, params, pdf, cdf, quantile});
});

describe('triangular(0, 0.5, 2)', () => {
  const pdf = [
    0.0, 0.4000000000000000222, 0.80000000000000004441, 0.93333333333333323711,
    0.79999999999999993339, 0.66666666666666662966, 0.53333333333333332593,
    0.40000000000000007772, 0.26666666666666660745, 0.13333333333333330373, 0.0,
  ];
  const cdf = [
    0.0, 0.040000000000000007772, 0.160000000000000031086,
    0.346666666666666789531, 0.520000000000000017764, 0.666666666666666740682,
    0.786666666666666625218, 0.880000000000000004441, 0.946666666666666656305,
    0.986666666666666691832, 1.0,
  ];
  const quantile = [
    0.0, 0.31622776601683794118, 0.4472135954999579277, 0.55086232538105628365,
    0.65835921350012616138, 0.77525512860841105933, 0.90455488498966762911,
    1.05131670194948600994, 1.22540333075851659572, 1.45227744249483392558, 2.0,
  ];
  const x = fromTo(0.0, 2.01, 0.2);
  const params = {a: 0.0, b: 2.0, mid: 0.5};

  distTests({Dist: Dist3, x, params, pdf, cdf, quantile});
});
